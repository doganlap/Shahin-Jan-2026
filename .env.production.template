# GRC System Production Environment Configuration Template
# Copy this file to .env and fill in your actual production values
# IMPORTANT: Never commit .env file to source control!

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# Primary Database Connection
# Replace with your production SQL Server details
ConnectionStrings__Default=Server=YOUR_SQL_SERVER_HOST;Database=GrcDb;User Id=YOUR_DB_USER;Password=YOUR_DB_PASSWORD;TrustServerCertificate=True;MultipleActiveResultSets=true;Encrypt=True

# Examples for different providers:
# Azure SQL: Server=tcp:yourserver.database.windows.net,1433;Initial Catalog=GrcDb;User ID=grc_app;Password=xxx;Encrypt=True;TrustServerCertificate=False
# AWS RDS: Server=your-db.xxxxx.us-east-1.rds.amazonaws.com,1433;Database=GrcDb;User Id=admin;Password=xxx;TrustServerCertificate=True
# On-Premise: Server=192.168.1.100,1433;Database=GrcDb;User Id=grc_app;Password=xxx;TrustServerCertificate=True

# Optional: Separate read-only replica for reporting (if available)
# ConnectionStrings__ReadOnly=Server=YOUR_READONLY_SQL_SERVER;Database=GrcDb;User Id=readonly_user;Password=xxx

# ============================================================================
# AUTHENTICATION & SECURITY
# ============================================================================

# JWT Secret Key - MUST be unique and at least 32 characters
# Generate with: openssl rand -base64 48
# CRITICAL: This must be kept secret and rotated periodically
Authentication__Jwt__SecretKey=YOUR_RANDOMLY_GENERATED_SECRET_KEY_AT_LEAST_64_CHARACTERS_LONG

# JWT Configuration
Authentication__Jwt__Issuer=GrcSystem
Authentication__Jwt__Audience=GrcSystem
Authentication__Jwt__Expiration=3600

# ============================================================================
# CORS CONFIGURATION
# ============================================================================

# Frontend/Client URLs - Replace with your actual domain(s)
# Add as many origins as needed, incrementing the index number
Cors__AllowedOrigins__0=https://grc.yourcompany.com
Cors__AllowedOrigins__1=https://yourcompany.com
Cors__AllowedOrigins__2=https://www.yourcompany.com

# Additional CORS settings (uncomment if needed)
# Cors__AllowedMethods__0=GET
# Cors__AllowedMethods__1=POST
# Cors__AllowedMethods__2=PUT
# Cors__AllowedMethods__3=DELETE
# Cors__AllowedMethods__4=PATCH
# Cors__AllowedMethods__5=OPTIONS
# Cors__AllowCredentials=true

# ============================================================================
# HOST CONFIGURATION
# ============================================================================

# Allowed Host Headers - semicolon-separated list
AllowedHosts=grc.yourcompany.com;api.yourcompany.com;yourcompany.com

# Application URLs
ASPNETCORE_URLS=http://+:80;https://+:443

# Environment
ASPNETCORE_ENVIRONMENT=Production

# ============================================================================
# MONITORING & TELEMETRY
# ============================================================================

# Application Insights Connection String (Azure)
# Get from: Azure Portal > Application Insights > Overview > Connection String
ApplicationInsights__ConnectionString=InstrumentationKey=YOUR_INSTRUMENTATION_KEY;IngestionEndpoint=https://YOUR_REGION.in.applicationinsights.azure.com/;LiveEndpoint=https://YOUR_REGION.livediagnostics.monitor.azure.com/

# Application Insights Settings
ApplicationInsights__EnableAdaptiveSampling=true
ApplicationInsights__EnablePerformanceCounterCollectionModule=true

# Alternative: Self-hosted monitoring (Seq, Elasticsearch, etc.)
# Serilog__WriteTo__0__Name=Seq
# Serilog__WriteTo__0__Args__serverUrl=http://seq-server:5341
# Serilog__WriteTo__0__Args__apiKey=YOUR_SEQ_API_KEY

# ============================================================================
# OPTIONAL: CACHING (Redis)
# ============================================================================

# Redis Connection String (if using distributed caching)
# ConnectionStrings__Redis=redis-server.yourcompany.com:6379,password=YOUR_REDIS_PASSWORD,ssl=True,abortConnect=False

# Azure Redis Cache Example:
# ConnectionStrings__Redis=yourredis.redis.cache.windows.net:6380,password=xxx,ssl=True,abortConnect=False

# ============================================================================
# OPTIONAL: BLOB STORAGE
# ============================================================================

# Azure Blob Storage (for file uploads, documents, etc.)
# ConnectionStrings__BlobStorage=DefaultEndpointsProtocol=https;AccountName=YOUR_STORAGE_ACCOUNT;AccountKey=YOUR_STORAGE_KEY;EndpointSuffix=core.windows.net

# AWS S3 (alternative)
# AWS__S3__BucketName=grc-production-files
# AWS__S3__Region=us-east-1
# AWS__AccessKeyId=YOUR_AWS_ACCESS_KEY
# AWS__SecretAccessKey=YOUR_AWS_SECRET_KEY

# ============================================================================
# RATE LIMITING
# ============================================================================

RateLimiting__Enabled=true
RateLimiting__PermitLimit=100
RateLimiting__Window=00:01:00
RateLimiting__QueueLimit=0

# ============================================================================
# HEALTH CHECKS
# ============================================================================

HealthChecks__Enabled=true
HealthChecks__Path=/health
HealthChecks__DetailedOutput=false

# ============================================================================
# LOGGING
# ============================================================================

# Minimum log levels
Logging__LogLevel__Default=Warning
Logging__LogLevel__Microsoft=Error
Logging__LogLevel__Microsoft__AspNetCore=Warning
Logging__LogLevel__Microsoft__EntityFrameworkCore=Error

Serilog__MinimumLevel__Default=Warning
Serilog__MinimumLevel__Override__Microsoft=Error
Serilog__MinimumLevel__Override__System=Error

# ============================================================================
# SMTP/EMAIL CONFIGURATION (if using email notifications)
# ============================================================================

# Email__Host=smtp.yourcompany.com
# Email__Port=587
# Email__UseSsl=true
# Email__Username=noreply@yourcompany.com
# Email__Password=YOUR_EMAIL_PASSWORD
# Email__FromAddress=noreply@yourcompany.com
# Email__FromName=GRC System

# SendGrid Alternative:
# Email__Provider=SendGrid
# Email__SendGridApiKey=YOUR_SENDGRID_API_KEY

# ============================================================================
# FEATURE FLAGS (Optional)
# ============================================================================

# Features__EnableSwagger=false
# Features__EnableDetailedErrors=false
# Features__EnableRateLimiting=true
# Features__EnableCaching=true

# ============================================================================
# SECURITY HEADERS
# ============================================================================

# Security__EnableHsts=true
# Security__HstsMaxAge=31536000
# Security__EnableContentSecurityPolicy=true
# Security__ContentSecurityPolicy=default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'

# ============================================================================
# DATABASE SEEDING (First deployment only)
# ============================================================================

# Set to true for initial deployment to seed admin user and roles
# Set to false after first deployment
# SeedData__CreateAdminUser=true
# SeedData__AdminEmail=admin@yourcompany.com
# SeedData__AdminPassword=YOUR_SECURE_ADMIN_PASSWORD

# ============================================================================
# BACKUP & DISASTER RECOVERY
# ============================================================================

# Backup__Enabled=true
# Backup__Schedule=0 2 * * *  # Daily at 2 AM
# Backup__RetentionDays=30
# Backup__StorageConnectionString=YOUR_BACKUP_STORAGE_CONNECTION_STRING

# ============================================================================
# REGULATORY COMPLIANCE
# ============================================================================

# Compliance__EnableAuditLogging=true
# Compliance__DataRetentionDays=2555  # 7 years for KSA regulations
# Compliance__EncryptionAtRest=true
# Compliance__EncryptionInTransit=true

# ============================================================================
# PERFORMANCE TUNING
# ============================================================================

# Database__CommandTimeout=30
# Database__MaxPoolSize=100
# Database__MinPoolSize=5
# Http__MaxConnectionsPerServer=100
# Http__ConnectionTimeout=00:01:00

# ============================================================================
# KUBERNETES-SPECIFIC (if deploying to K8s)
# ============================================================================

# POD_NAME=${POD_NAME}
# POD_NAMESPACE=${POD_NAMESPACE}
# POD_IP=${POD_IP}

# ============================================================================
# ADDITIONAL NOTES
# ============================================================================

# 1. Security: Store this file securely, never commit to source control
# 2. Validation: Run pre-deployment validation script before deploying
# 3. Secrets: Consider using Azure Key Vault, AWS Secrets Manager, or HashiCorp Vault
# 4. Rotation: Rotate JWT secret and database passwords every 90 days
# 5. Testing: Test configuration in staging environment before production
# 6. Backups: Ensure all secrets are backed up securely
# 7. Monitoring: Set up alerts for configuration validation failures

# For Docker Compose deployment, this file will be automatically loaded
# For Kubernetes, convert to ConfigMap/Secret using:
#   kubectl create secret generic grc-config --from-env-file=.env

# For Azure App Service, import using:
#   az webapp config appsettings set --name YOUR_APP --resource-group YOUR_RG --settings @.env

# Last Updated: 2026-01-03
