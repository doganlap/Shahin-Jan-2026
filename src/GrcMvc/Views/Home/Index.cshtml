@{
    ViewData["Title"] = "Dashboard";
}

<div class="container-fluid">
    <h1 class="h3 mb-4">
        <i class="bi bi-speedometer2"></i> Dashboard
    </h1>

    @if (User.Identity?.IsAuthenticated == true)
    {
        <!-- Statistics Cards -->
        <div class="row mb-4">
            <div class="col-xl-3 col-md-6 mb-3">
                <div class="card dashboard-card dashboard-card-danger h-100">
                    <div class="card-body">
                        <div class="row align-items-center">
                            <div class="col">
                                <div class="stat-label">Total Risks</div>
                                <div class="stat-number text-danger">24</div>
                            </div>
                            <div class="col-auto">
                                <i class="bi bi-exclamation-triangle text-danger" style="font-size: 2rem;"></i>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer bg-transparent">
                        <a asp-controller="Risk" asp-action="Index" class="small text-decoration-none">
                            View Details <i class="bi bi-arrow-right"></i>
                        </a>
                    </div>
                </div>
            </div>

            <div class="col-xl-3 col-md-6 mb-3">
                <div class="card dashboard-card dashboard-card-success h-100">
                    <div class="card-body">
                        <div class="row align-items-center">
                            <div class="col">
                                <div class="stat-label">Active Controls</div>
                                <div class="stat-number text-success">156</div>
                            </div>
                            <div class="col-auto">
                                <i class="bi bi-shield-check text-success" style="font-size: 2rem;"></i>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer bg-transparent">
                        <a href="#" class="small text-decoration-none">
                            View Details <i class="bi bi-arrow-right"></i>
                        </a>
                    </div>
                </div>
            </div>

            <div class="col-xl-3 col-md-6 mb-3">
                <div class="card dashboard-card dashboard-card-warning h-100">
                    <div class="card-body">
                        <div class="row align-items-center">
                            <div class="col">
                                <div class="stat-label">Pending Audits</div>
                                <div class="stat-number text-warning">8</div>
                            </div>
                            <div class="col-auto">
                                <i class="bi bi-clipboard-check text-warning" style="font-size: 2rem;"></i>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer bg-transparent">
                        <a href="#" class="small text-decoration-none">
                            View Details <i class="bi bi-arrow-right"></i>
                        </a>
                    </div>
                </div>
            </div>

            <div class="col-xl-3 col-md-6 mb-3">
                <div class="card dashboard-card dashboard-card-info h-100">
                    <div class="card-body">
                        <div class="row align-items-center">
                            <div class="col">
                                <div class="stat-label">Compliance Score</div>
                                <div class="stat-number text-info">87%</div>
                            </div>
                            <div class="col-auto">
                                <i class="bi bi-graph-up text-info" style="font-size: 2rem;"></i>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer bg-transparent">
                        <a href="#" class="small text-decoration-none">
                            View Details <i class="bi bi-arrow-right"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <!-- Recent Risks -->
            <div class="col-lg-6 mb-4">
                <div class="card">
                    <div class="card-header">
                        <i class="bi bi-exclamation-triangle"></i> Recent Risks
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-sm table-hover">
                                <thead>
                                    <tr>
                                        <th>Risk Name</th>
                                        <th>Level</th>
                                        <th>Status</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Data Breach</td>
                                        <td><span class="badge bg-danger">High</span></td>
                                        <td><span class="badge bg-warning">Active</span></td>
                                        <td><a href="#" class="btn btn-sm btn-outline-primary">View</a></td>
                                    </tr>
                                    <tr>
                                        <td>System Downtime</td>
                                        <td><span class="badge bg-warning">Medium</span></td>
                                        <td><span class="badge bg-success">Mitigated</span></td>
                                        <td><a href="#" class="btn btn-sm btn-outline-primary">View</a></td>
                                    </tr>
                                    <tr>
                                        <td>Compliance Violation</td>
                                        <td><span class="badge bg-danger">Critical</span></td>
                                        <td><span class="badge bg-warning">Active</span></td>
                                        <td><a href="#" class="btn btn-sm btn-outline-primary">View</a></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <a asp-area="Risk" asp-controller="Risk" asp-action="Index" class="btn btn-sm btn-primary">
                            View All Risks
                        </a>
                    </div>
                </div>
            </div>

            <!-- Upcoming Audits -->
            <div class="col-lg-6 mb-4">
                <div class="card">
                    <div class="card-header">
                        <i class="bi bi-calendar-event"></i> Upcoming Audits
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-sm table-hover">
                                <thead>
                                    <tr>
                                        <th>Audit Title</th>
                                        <th>Type</th>
                                        <th>Due Date</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Q1 Financial Audit</td>
                                        <td>Internal</td>
                                        <td>2024-01-15</td>
                                        <td><a href="#" class="btn btn-sm btn-outline-primary">View</a></td>
                                    </tr>
                                    <tr>
                                        <td>ISO 27001 Compliance</td>
                                        <td>External</td>
                                        <td>2024-01-30</td>
                                        <td><a href="#" class="btn btn-sm btn-outline-primary">View</a></td>
                                    </tr>
                                    <tr>
                                        <td>IT Security Assessment</td>
                                        <td>Internal</td>
                                        <td>2024-02-10</td>
                                        <td><a href="#" class="btn btn-sm btn-outline-primary">View</a></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <a href="#" class="btn btn-sm btn-primary">View All Audits</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <i class="bi bi-lightning"></i> Quick Actions
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-3 mb-2">
                                <a asp-controller="Risk" asp-action="Create" class="btn btn-primary w-100">
                                    <i class="bi bi-plus-circle"></i> New Risk
                                </a>
                            </div>
                            <div class="col-md-3 mb-2">
                                <a href="#" class="btn btn-success w-100">
                                    <i class="bi bi-plus-circle"></i> New Control
                                </a>
                            </div>
                            <div class="col-md-3 mb-2">
                                <a href="#" class="btn btn-info w-100">
                                    <i class="bi bi-plus-circle"></i> New Assessment
                                </a>
                            </div>
                            <div class="col-md-3 mb-2">
                                <a href="#" class="btn btn-warning w-100">
                                    <i class="bi bi-file-earmark-bar-graph"></i> Generate Report
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    }
    else
    {
        <!-- Welcome message for non-authenticated users -->
        <div class="text-center py-5">
            <h1 class="display-4">Welcome to GRC Management System</h1>
            <p class="lead">Comprehensive Governance, Risk, and Compliance Management Platform</p>
            <hr class="my-4">
            <p>Please login to access the dashboard and manage your organization's GRC activities.</p>
            <p class="mt-4">
                <a asp-controller="Account" asp-action="Login" class="btn btn-primary btn-lg me-2">
                    <i class="bi bi-box-arrow-in-right"></i> Login
                </a>
                <a asp-controller="Account" asp-action="Register" class="btn btn-secondary btn-lg">
                    <i class="bi bi-person-plus"></i> Register
                </a>
            </p>
        </div>

        <div class="row mt-5">
            <div class="col-md-4">
                <div class="text-center">
                    <i class="bi bi-shield-check text-primary" style="font-size: 3rem;"></i>
                    <h3>Risk Management</h3>
                    <p>Identify, assess, and mitigate risks across your organization with our comprehensive risk management tools.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="text-center">
                    <i class="bi bi-clipboard-check text-success" style="font-size: 3rem;"></i>
                    <h3>Compliance Tracking</h3>
                    <p>Ensure compliance with regulatory requirements and internal policies through automated tracking and reporting.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="text-center">
                    <i class="bi bi-graph-up text-info" style="font-size: 3rem;"></i>
                    <h3>Performance Analytics</h3>
                    <p>Monitor your GRC performance with real-time dashboards and comprehensive analytics.</p>
                </div>
            </div>
        </div>
    }
</div>
